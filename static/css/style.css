/* ==========================================================================
   UNIVERSAL: Custom Properties
   ========================================================================== */

   /* Color Palettes
      ========================================================================== */

   :root {
      /* Accent color palette */
      --color-accent-000: #FAFBFC;
      --color-accent-100: #F0F6FC;
      --color-accent-200: #DEE6EE;
      --color-accent-300: #A9C1D9;
      --color-accent-400: #85A8CC;
      --color-accent-500: #3F709E;
      --color-accent-600: #3F709E;
      --color-accent-700: #296094;
      --color-accent-800: #114D84;
      --color-accent-900: #1B2843;
      /* Neutral color palette */
      --color-neutral-100: #F5F7FA; /* "White" */
      --color-neutral-200: #DADDE0;
      --color-neutral-300: #D2D5D9;
      --color-neutral-400: #B3B8BD;
      --color-neutral-500: #81868A;
      --color-neutral-600: #5B5F63;
      --color-neutral-700: #414447;
      --color-neutral-800: #2E3133;
      --color-neutral-900: #1C1D1F; /* "Black" */
      /* Specific implementations */
      --color-body-bg: var(--color-accent-000);
      --color-body-text: var(--color-neutral-900);
      --color-link: var(--color-accent-700);
      --color-link-hover: var(--color-accent-900);
      --color-bannernav-logotype: var(--color-neutral-900);
      --color-bannernav-link: var(--color-accent-800);
      --color-bannernav-link-hover: var(--color-neutral-900);
      --color-bannernav-link-active: var(--color-neutral-900);
      --color-bannernav-link-underline: var(--color-accent-300);
      --color-bannernav-link-underline-active: var(--color-accent-800);
      --color-button-text: var(--color-accent-000);
      --color-button-border: var(--color-accent-800);
      --color-button-bg: var(--color-accent-800);
      --color-button-hover-text: var(--color-accent-800);
      --color-button-hover-border: var(--color-accent-800);
      --color-button-hover-bg: var(--color-accent-000);
      --color-titles-text: var(--color-neutral-900);
      --color-titles-stripe: var(--color-accent-200);
      --color-titles-article-text: var(--color-accent-800);
      --color-article-metadata: var(--color-neutral-500);
      --color-article-deck: var(--color-neutral-600);
      --color-tag-text: var(--color-accent-800);
      --color-tag-bg: var(--color-accent-200);
      --color-textdecoration: var(--color-accent-200);
   }

   /* Shadows
      ========================================================================== */
   
   :root {
      --box-shadow-sm: 0.2px 0.2px 0.8px -10px rgba(40,10,0,0.014), 0.4px 0.4px 2px -10px rgba(40,10,0,0.02), 0.8px 0.8px 3.8px -10px rgba(40,10,0,0.025), 1.3px 1.3px 6.7px -10px rgba(40,10,0,0.03), 2.5px 2.5px 12.5px -10px rgba(40,10,0,0.036), 6px 6px 30px -10px rgba(40,10,0,0.05);
      --box-shadow-lg: 1px 0.9px 2.3px -3px rgba(30,10,10,0.04), 2.4px 2.2px 5.5px -3px rgba(30,10,10,0.05), 4.5px 4.1px 10.4px -3px rgba(30,10,10,0.06), 8px 7.4px 18.5px -3px rgba(30,10,10,0.07), 15px 13.8px 34.7px -3px rgba(30,10,10,0.08), 36px 33px 83px -3px rgba(30,10,10,0.2);
      --box-shadow-md: 0.2px 0.4px 0.8px -10px rgba(0,0,0,0.03), 0.4px 0.9px 2px -10px rgba(0,0,0,0.03), 0.8px 1.8px 3.8px -10px rgba(0,0,0,0.038), 1.3px 3.1px 6.7px -10px rgba(0,0,0,0.045), 2.5px 5.8px 12.5px -10px rgba(0,0,0,0.06), 6px 14px 30px -10px rgba(0,0,0,0.08);
   }

   /* Type, Space, Grid, Measure
      ========================================================================== */
   
   /**
    * Much of what is below is generated from the Utopia design system. See these links for reference:
    * @link https://utopia.fyi/type/calculator?c=320,18,1.2,1240,22,1.333,6,2,&s=0.75|0.5|0.25,1.5|2|3|4|6,s-l&g=s,l,xl,12 
    * @link https://utopia.fyi/space/calculator?c=320,18,1.2,1240,22,1.333,6,2,&s=0.75|0.5|0.25,1.5|2|3|4|6,s-l&g=s,l,xl,12 
    * @link https://utopia.fyi/grid/calculator?c=330,18,1.2,1364,22,1.333,6,2,&s=0.75|0.5|0.25,1.5|2|3|4|6,s-l&g=s,l,xl,12 
    */
   
   :root {
      /* Font families */
      --font-family-body: "Noto Sans", sans-serif;
      --font-family-headers: "Merriweather", serif;
      --font-family-nav: "Noto Sans", sans-serif;
      --font-family-logotype: "Merriweather", serif;
      /* Modular type scale */
      --step--2: clamp(0.77rem, calc(0.78rem + -0.01vw), 0.78rem);
      --step--1: clamp(0.94rem, calc(0.90rem + 0.16vw), 1.03rem);
      --step-0: clamp(1.13rem, calc(1.04rem + 0.43vw), 1.38rem);
      --step-1: clamp(1.35rem, calc(1.18rem + 0.84vw), 1.83rem);
      --step-2: clamp(1.62rem, calc(1.33rem + 1.43vw), 2.44rem);
      --step-3: clamp(1.94rem, calc(1.49rem + 2.28vw), 3.26rem);
      --step-4: clamp(2.33rem, calc(1.63rem + 3.49vw), 4.34rem);
      --step-5: clamp(2.80rem, calc(1.76rem + 5.20vw), 5.79rem);
      --step-6: clamp(3.36rem, calc(1.84rem + 7.57vw), 7.71rem);
      /* Fluid spaces (in "T-shirt sizes") */
      --space-3xs: clamp(0.31rem, calc(0.29rem + 0.11vw), 0.38rem);
      --space-2xs: clamp(0.56rem, calc(0.52rem + 0.22vw), 0.69rem);
      --space-xs: clamp(0.88rem, calc(0.81rem + 0.33vw), 1.06rem);
      --space-s: clamp(1.13rem, calc(1.04rem + 0.43vw), 1.38rem);
      --space-m: clamp(1.69rem, calc(1.56rem + 0.65vw), 2.06rem);
      --space-l: clamp(2.25rem, calc(2.08rem + 0.87vw), 2.75rem);
      --space-xl: clamp(3.38rem, calc(3.11rem + 1.30vw), 4.13rem);
      --space-2xl: clamp(4.50rem, calc(4.15rem + 1.74vw), 5.50rem);
      --space-3xl: clamp(6.75rem, calc(6.23rem + 2.61vw), 8.25rem);
      /* One-up pairs */
      --space-3xs-2xs: clamp(0.31rem, calc(0.18rem + 0.65vw), 0.69rem);
      --space-2xs-xs: clamp(0.56rem, calc(0.39rem + 0.87vw), 1.06rem);
      --space-xs-s: clamp(0.88rem, calc(0.70rem + 0.87vw), 1.38rem);
      --space-s-m: clamp(1.13rem, calc(0.80rem + 1.63vw), 2.06rem);
      --space-m-l: clamp(1.69rem, calc(1.32rem + 1.85vw), 2.75rem);
      --space-l-xl: clamp(2.25rem, calc(1.60rem + 3.26vw), 4.13rem);
      --space-xl-2xl: clamp(3.38rem, calc(2.64rem + 3.70vw), 5.50rem);
      --space-2xl-3xl: clamp(4.50rem, calc(3.20rem + 6.52vw), 8.25rem);
      /* Measure */
      --measure: 40rem; /* ~60ch */
      --measure-wide: 44rem; /* ~80ch */
      --measure-wider: 50rem;
      --measure-widest: 85.25rem;
      /* Utopia Grid */
      --u-grid-max-width: var(--measure-widest);
      --u-grid-gutter: var(--space-s-l, clamp(1.13rem, calc(0.63rem + 2.49vw), 2.75rem));
      --u-grid-columns: 12;
   }

/* ==========================================================================
   UNIVERSAL: Inherited Properties
   ========================================================================== */

   /* Body properties
      ========================================================================== */

   body {
      text-rendering: optimizeSpeed;
      font: var(--step-0)/1.5 var(--font-family-body);
      background-color: var(--color-body-bg);
      color: var(--color-body-text);
   }
   
   /* Measure
      ========================================================================== */
   
   /* Main
      ========================================================================== */

   main {
      padding-inline: var(--space-s);
      margin-block-start: var(--space-l);
      margin-block-end: var(--space-2xl);
   }
   
   /* Block-level Elements and Vertical Rhythm
      ========================================================================== */
   
   h1,
   h2,
   h3 {
      font-family: var(--font-family-headers);
      display: block;
      margin: 0;
      padding: 0;
      line-height: 1;
   }

   h1 { font-size: var(--step-4); }
   h2 { font-size: var(--step-3); }
   h3 { font-size: var(--step-2); }

   /* Inline Styles
      ========================================================================== */

   a {
      color: var(--color-accent-800);
      text-underline-offset: .2ex;
   }

   strong {
      font-weight: bold;
   }

   em {
      font-style: italic;
   }
   
   small,
   sub,
   sup {
      font-size: var(--step--2);
   }
   
   sub { vertical-align: sub }
   sup { vertical-align: super }

   sub a,
   sup a {
      text-decoration: none;
   }

   figure img,
   figure video {
      max-inline-size: 100%;
   }

   figcaption {
      font-size: var(--step--1);
      font-style: italic;
      color: var(--color-neutral-700);
   }

/* ==========================================================================
   LAYOUT PRIMITIVES / Composition Layer
   ========================================================================== */

/* Utopia-style grid
   ========================================================================== */

   .u-container {
      max-width: var(--u-grid-max-width);
      margin-inline: auto;
   }
    
   .u-grid {
      display: grid;
      grid-template-columns: repeat(var(--u-grid-columns),1fr);
      gap: var(--u-grid-gutter);
   }

   /* Stack
      ========================================================================== */

   /* Standard Stack, with a separation 1.5x the font-size */
   .stack {
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
   }
   
      .stack > * {
         margin-block: 0;
      } 
      
      .stack > * + * {
         margin-block-start: var(--space, var(--space-m));
      }

   /* Small stack, with a separation ~.5x the font-size */
   .stack-small {
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
   }
   
      .stack-small > * {
         margin-block: 0;
      } 
      
      .stack-small > * + * {
         margin-block-start: var(--space, var(--space-3xs));
      }

   /* Large stack, with a separation 3x the font-size */
   .stack-large {
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
   }
   
      .stack-large > * {
         margin-block: 0;
      } 
      
      .stack-large > * + * {
         margin-block-start: var(--space, var(--space-xl));
      }
   
   /* A utility class for creating an exception for a stacked child */
   .stack-exception,
   .stack-exception + * {
     margin-block: 0;
     margin-block-start: 0;
   }
   
   /* Center
      ========================================================================== */

   .center {
      box-sizing: content-box;
      margin-inline: auto;
      max-inline-size: var(--measure);
   }

   /*
    * This center layout is a primitive I made to center everything, but allow 
    */

   .center-layout {
      display: flex;
      flex-flow: column nowrap;
      align-items: center;
      gap: var(--space, var(--space-m));
   }

      .center-layout > * {
         inline-size: 100%;
         max-inline-size: var(--measure);
      }

   /* Cluster
      ========================================================================== */
      
   .cluster {
      display: flex;
      flex-wrap: wrap;
      gap: var(--space, var(--space-s));
      justify-content: flex-start;
      align-items: center;
   }
   
   /* Grid
      ========================================================================== */
   
   .grid {
      display: grid;
      grid-gap: var(--space-s);
      align-items: start; /* Might change back to stretch; need to test */
   }
      
   @supports (width: min(20rem, 100%)) {
      .grid {
         grid-template-columns: repeat(auto-fit, minmax(min(18rem, 100%), 1fr));
      }
   }
   
   /* Multicolumn List (Custom)
      ========================================================================== */
   
   .multicolumn-list ol,
   .multicolumn-list ul {
      columns: 2;
      column-gap: 1rem;
   }
      
   .multicolumn-list li {
      column-span: all;
   }
      
   .multicolumn-list li:nth-last-child(n+5), 
   .multicolumn-list li:nth-last-child(n+5) ~ * {
      column-span: none;
   }
   
   /* Multicolumn Grid (Custom)
      ========================================================================== */
   
   .multicolumn-grid {
      columns: 2;
      column-gap: 1rem;
   }
      
   .multicolumn-grid > * {
      column-span: all;
      width: 100%;
   }
   
   .multicolumn-grid > *:nth-last-child(n+6), 
   .multicolumn-grid > *:nth-last-child(n+6) ~ * {
      column-span: none;
   }
         
   /* Switcher
      ========================================================================== */
   
   .switcher {
      display: flex;
      flex-wrap: wrap;
      gap: 1rem;
      /*gap: var(--space-s);*/
   }
   
   .switcher > * {
      flex-grow: 1;
      flex-basis: calc((30rem - 100%) * 999);
   }
   
   
   .switcher > :nth-last-child(n+ 3),
   .switcher > :nth-last-child(n+ 3) ~ * {
      flex-basis: 100%;
   } 
   
   /* Frame
      ========================================================================== */
   
   .frame {
      --n: 16;
      --d: 9;
      aspect-ratio: var(--n) / var(--d);
      overflow: hidden;
      display: flex;
      justify-content: center;
      align-items: center;
      background-size: contain;
   }
    
      .frame > img,
      .frame > video {
         inline-size: 100%;
         block-size: 100%;
         object-fit: cover;
      }
   
   /* Box
      ========================================================================== */
   
   .box {
      padding: var(--space-m);
      border: 0 solid;
   }

      .box * {
         color: inherit;
      }

   .box-small {
      padding: var(--space-3xs);
      border: 0 solid;
   }

/* ==========================================================================
   TEMPLATE: Home Page
   ========================================================================== */

   /* Layout
      ========================================================================== */

   .homepage {
      grid-template-areas:
         "header header header header header header header header header header header header"
         "work work work work work work work work work work work work"
         "notes notes notes notes notes notes notes notes notes notes notes notes";
   }

   .homepage__header { grid-area: header; margin-block-end: var(--space-xl); }
   .homepage__casestudies { grid-area: work; margin-block-end: var(--space-l); }
   .homepage__notes { grid-area: notes; margin-block-end: var(--space-l); }

   /* As the screen expands to 960px, the grid has the MOST freedom, so we give everything more space */
   @media screen and (min-width: 900px) {
      .homepage {
         grid-template-areas:
            ". . header header header header header header header header . ."
            ". work work work work work work work work work work ."
            ". notes notes notes notes notes notes notes notes notes notes .";
      }
   }

   /* Header
      ========================================================================== */

   .homepage__header {
      margin-block-start: var(--space-l);
   }

   .homepage__header h1 {
      color: var(--color-accent-800);
      font-family: var(--font-family-headers);
      font-size: var(--step-5);
      font-weight: 700;
   }

   .homepage__header ul {
      --space: var(--space-3xs);
      font-size: var(--step-2);
      line-height: var(--space-l);
   }

      .homepage__header li::after {
         content: '//';
         margin-inline-start: var(--space-3xs);
         color: var(--color-textdecoration);
      }

      .homepage__header li:last-of-type::after {
         content: '';
      }

   /* Sections
      ========================================================================== */
   
   .homepage__casestudies > header,
   .homepage__notes > header {
      
   }

   .homepage__casestudies > header > h2,
   .homepage__notes > header > h2 {
      font-size: var(--step-0);
      font-weight: 700;
      font-family: var(--font-family-body);
      color: var(--color-accent-700);
      border-bottom: solid 1px var(--color-textdecoration);
      margin-block-end: var(--space-3xs);
   }
   

/* ==========================================================================
   COMPONENTS
   ========================================================================== */

   /* Banner Navigation
      ========================================================================== */

   .banner {
      /* Positioning & Box-Model */
      inline-size: auto;
      max-inline-size: var(--measure-widest);
      margin-block: var(--space-3xs);
      margin-inline: var(--space-s);
      /* Interior Display */
      display: flex;
      flex-flow: row nowrap;
      justify-content: space-between;
      align-items: center;
   }
   
   .banner__logotype {
      font-family: var(--font-family-logotype);
      font-weight: bold;
   }
   
      .banner__logotype a {
         color: var(--color-bannernav-logotype);
         text-decoration: none !important;
      }

   .banner__links {
      font-family: var(--font-family-nav);
      font-size: var(--step--1);
   }
   
      .banner__links a:link,
      .banner__links a:visited {
         color: var(--color-bannernav-link);
      }
   
      .banner__links a:hover,
      .banner__links a:active {
         color: var(--color-bannernav-link-hover);
         text-decoration: none;
      }

   /* Card
      ========================================================================== */

   .card {
      border: solid 1px var(--color-accent-100);
      border-radius: var(--space-2xs);
      cursor: pointer;
      overflow: hidden;
      box-shadow: var(--box-shadow-sm);
      transition: all .3s ease-in;
   }

   .card:hover {
      transform: scale(1.01);
      transform-origin: center;
      box-shadow: var(--box-shadow-md);
   }

   .card,
   .card a {
      text-decoration: none; 
   }

   .card h2 {
      font-size: var(--step-0);
      margin-inline: var(--space-3xs);
      margin-block-start: var(--space-3xs);
   }

   .card p {
      font-size: var(--step--1);
      margin-inline: var(--space-3xs);
      margin-block-end: var(--space-3xs);
   }

   /* Header (Tall, single/short title)
      ========================================================================== */
   
   .header__tall {
      font-family: var(--font-family-headers);
      font-size: var(--step-6);
      font-weight: 700;
      text-align: center;
   }

   /* Header (Garden)
      ========================================================================== */

   .header_garden {
      border-bottom: solid 1px var(--color-textdecoration);
      padding-block-end: var(--space-l);
   }

   .header_garden__title {
      font-family: var(--font-family-headers);
      font-size: var(--step-4);
      font-weight: 700;
   }

   .header_garden__breadcrumb {
      font-size: var(--step--1);
   }

   .header_garden__breadcrumb a {
      text-decoration: none;
      font-weight: bold;
      text-transform: capitalize;
    }

   .header_garden__deck {
      font-size: var(--step-1);
      color: var(--color-accent-700);
      line-height: 1.2;;
   }

   .header_garden__origin {
      font-size: var(--step--1);
   }

   /* Assumed Audience Callout
      ========================================================================== */

   .callout__assumedAudience {
      font-size: var(--step--1);
      color: var(--color-neutral-900);
      background-color: var(--color-accent-200);
      padding: var(--space-2xs);
      max-inline-size: var(--measure);
   }
   
      .callout__assumedAudience strong {
         color: var(--color-accent-700);
      }  
   
      .callout__assumedAudience strong::after {
         content: ': ';
      }

/* ==========================================================================
   UTILITIES & HELPERS
   ========================================================================== */

/* These are key utilities for the .center-layout class, allowing me to make
   certain items larger or smaller, based on my needs.
   ========================================================================== */

   .wide {
      max-inline-size: var(--measure-wide) !important;
   }

   .wider {
      max-inline-size: var(--measure-wider) !important;
   }

   .widest {
      max-inline-size: var(--measure-widest) !important;
   }

   /* Animated Links
      ========================================================================== */
   
   .animate-link {
      position: relative; /* Makes the pseudo-element work */
      text-decoration: none;
   }
   
   .animate-link::after {
      /* Content */
      content: '';
      /* Positioning & Box Model*/
      position: absolute;
      width: 100%;
      height: 2px;
      bottom: -8px;
      left: 0;
      /* Other */
      background-color: var(--color-bannernav-link-underline);
      transform: scaleX(0);
      transform-origin: right;
      transition: transform 0.25s ease-out;
   }
   
   .animate-link:hover::after {
      transform: scaleX(1);
      transform-origin: left;
   }
   
   .animate-link-selected {
      color: var(--color-bannernav-link-active) !important;
   }
   
   .animate-link-selected::after {
      background-color: var(--color-bannernav-link-underline-active);
      transform: scaleX(1);
   }

   /* Footnotes
      ========================================================================== */

   .footnotes {
      font-size: var(--step--1);
   }

   .footnotes hr {
      display: inline-block;
      border: 0;
      margin-bottom: var(--space-3xs);
      text-align: start;
   }
   
      .footnotes hr::before {
         content: 'Footnotes';
         font-weight: bold;
         color: var(--color-accent-800);
      }
   
   .footnotes ol {
      list-style-type: decimal;
      margin-top: 0;
   }
   
      .footnotes li::marker {
         color: var(--color-accent-700);
      }
   
   .footnote-backref {
      text-decoration: none;
   }